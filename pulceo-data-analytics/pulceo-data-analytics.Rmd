---
title: "`r paste0('PULCEO Data Analytics:  ', params$subfolder)`" 
params:
  rootfolder: "/tmp/psm-data"
  subfolder: "sample"
knit: (function(input_file, encoding) {
  metadata <- rmarkdown::yaml_front_matter(input_file);
  out_dir <- with(metadata, paste0("reports/", params$subfolder));
  rmarkdown::render(input_file,
  encoding=encoding,
  output_file=file.path(dirname(input_file), out_dir, "index.html"))})
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---
```{r, include=FALSE, echo=FALSE}
if (!requireNamespace("here", quietly = TRUE)) {
  install.packages("here")
} else {
  library(here)
}
knitr::opts_knit$set(root.dir = here())
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, include = FALSE)
```

```{r eval=FALSE, include=FALSE, echo=FALSE}
# for testing and debugging purposes
ROOTFOLDER <- "/tmp/psm-data"
SUBFOLDER <- "3d027107-0854-4ca6-be3a-546153cda8a8"
ROOTFOLDER <<- params$rootfolder
SUBFOLDER <<- params$subfolder
```

```{r directories, child = 'directories.Rmd' }
```

```{r topology, child = 'includes/topology.Rmd'}
```

```{r resources, child = 'includes/resources.Rmd'}
```

```{r events, child = 'includes/events.Rmd'}
```

```{r metrics, child = 'includes/metrics.Rmd'}
```

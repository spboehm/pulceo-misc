# Links

## Required Libraries

```{r warning=FALSE}
if(!require(kableExtra)) {
    install.packages("kableExtra")
    library(kableExtra)
}
if(!require(tidyverse)) {
    install.packages("tidyverse")
    library(tidyverse)
}
if(!require(xtable)){
    install.packages("xtable")
    library(xtable)
}
```

## Functions

Important symbols:

- `x`: Means "between all nodes", network-related metrics are obtained between all nodes of the particular layers. 
- `o`: Means "between particular pairs of nodes", network-related metrics are obtained between particular pairs of nodes.
- `|`: Means "between particular layers", network-related metrics are obtained between particular layers.
- `S`: Means "static", network-related metrics are used, required, or obtained in a static. They do not change over time.
- `D`: Means "dynamic", network-related metrics are used, required, or obtained in a dynamic way. Dynamic changes over time are considered.
- `H`: Means "hops", the number of hops are used, required, or obtained. It is the number of hops a packet requires to travel from one endpoint to another endpoint.
- `L`: Means "latency", it is either used, required, or obtained. It refers to the general network latency or network delay in IP networks, thus, the time for a packet to travel from one endpoint to another. We differentiate between the Round-trip time (RTT) and the End-to-end (E2E) latency.
- `B`: Means "bandwidth", it is either used, required, or obtained. It refers to the data transfer rate (i.e., capacity) of a network.

```{r}
ReplaceSymbol <- function(symbol) {
  switch(symbol,
         "x" = "\\ding{108}",
         "o" = "\\ding{110}",
         "|" = "\\ding{115}",
         "n" = "\\ding{55}"
         )
}

ReplaceSymbolsInCols<- function(df) {
  return (df %>%
  mutate_all(., funs(gsub('\\bx\\b', ReplaceSymbol("x"),. , fixed = FALSE))) %>% 
  mutate_all(., funs(gsub('\\bo\\b', ReplaceSymbol("o"),. , fixed = FALSE))) %>%  
  mutate_all(., funs(gsub('\\b|\\b', ReplaceSymbol("|"),. , fixed = TRUE))))
}


ReplaceScriptsInCells <- function(chars) {
  
  df <- lapply(chars, function(chars) {
  
    # check no subsripts are available
    if (nchar(chars) == 1) {
      chars <- paste(chars, "-----", sep = "")
    }
    # remove brackets
    charsWithoutBrackets <- gsub('\\(|\\)', '', chars)
    # remove whitespaces
    charsWithoutWhitespaces <- gsub('\\s', '', charsWithoutBrackets)
    charsAsVector <- as.vector(unlist(strsplit(charsWithoutWhitespaces,"")))
    
    # template symbol
    charsAsVector[1] <- ReplaceSymbol(charsAsVector[1])
    
    # template textsuperscript, we do not need to escape ',' because of latex math mode
    templateTextSuperScript <- "^{2,3}"
    templateMutatedStatic <- gsub('2', charsAsVector[2], templateTextSuperScript)
    templateMutatedDynamic <- gsub('3', charsAsVector[3], templateMutatedStatic)
    
    # template textsubscript
    templateTextSubscript <- "_{4,5,6}"
    templateMutatedHops <-  gsub('4', charsAsVector[4], templateTextSubscript)
    templateMutatedLatency <-  gsub('5', charsAsVector[5], templateMutatedHops)
    templateMutatedBandwidth <- gsub('6', charsAsVector[6], templateMutatedLatency)
    
    return(paste(charsAsVector[1], "$", templateMutatedDynamic, templateMutatedBandwidth, "$", sep=""))
  
  })
  return (df)
}

ReplaceScriptsInCols <- function(df)  {
  return (df %>% mutate_at(., vars(-Author,-Year), ReplaceScriptsInCells))
}
```

## Read CSVs

```{r}
lProps <- read.csv2("csv/links.csv")
```

## Replace Symbols in Columns

```{r}
lPropsMutated <- ReplaceScriptsInCols(lProps)
```

## Create LaTeX Table

### Link Properties

```{r}
kbl_fn_footnote_as_chunk = TRUE
kbl_fn_threeparttable = TRUE
kbl_fn_general_title = ""

lPropsKblCaption <- "Link Properties"

lPropsKbl <- kbl(lPropsMutated, "latex", escape = FALSE, caption = lPropsKblCaption, booktabs = TRUE) %>% 
  kable_styling(latex_options = "scale_down") %>%
  footnote(., general = c(""), general_title = kbl_fn_general_title, footnote_as_chunk = kbl_fn_footnote_as_chunk, threeparttable = kbl_fn_threeparttable)

save_kable(lPropsKbl, "latex/link-properties.tex")
```
